# Sample Apache2 Configuration for AI Toolkit
#
# Place this file in /etc/apache2/sites-available/aitoolkit.conf
# Then enable the site with: sudo a2ensite aitoolkit
# And restart Apache: sudo systemctl restart apache2

<VirtualHost *:80>
    # --- General Configuration ---
    ServerAdmin webmaster@localhost
    # Replace with your server's domain name or IP address
    ServerName your_server_domain_or_ip

    # --- WSGI Configuration for Flask Backend ---
    # Path to the WSGI file (you will need to create this)
    WSGIScriptAlias /api /path/to/your/project/backend/wsgi.py
    WSGIDaemonProcess aitoolkit user=www-data group=www-data threads=5
    WSGIProcessGroup aitoolkit

    <Directory /path/to/your/project/backend>
        WSGIProcessGroup aitoolkit
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
    </Directory>

    # --- Static Files Configuration for React Frontend ---
    # Alias for the React app's static build directory
    Alias / /path/to/your/project/frontend/build/
    <Directory /path/to/your/project/frontend/build>
        # Allow Apache to serve files from this directory
        Require all granted
        # Handle client-side routing for React
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.html$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>

    # --- Logging ---
    ErrorLog ${APACHE_LOG_DIR}/aitoolkit_error.log
    CustomLog ${APACHE_LOG_DIR}/aitoolkit_access.log combined

</VirtualHost>
